<!-- ***** WARNING! This file is auto-generated ***** -->

<!-- Do not edit it by hand if you want to keep your changes. -->
<!-- All changes *must* be made in the source markdown and then carried-->
<!-- through the pandoc conversion that creates these html files. -->

<!-- Make changes on https://github.com/tvheadend/tvheadend-documentation -->

<!-- File created on Thu Jun 11 11:39:44 BST 2015  -->
<!-- Created with pandoc 1.13.2  -->

<div class="hts-doc-text">
<h2 id="configuration---recording---digital-video-recorder-profiles">Configuration - Recording - Digital Video Recorder Profiles</h2>
<p>This tab is used to configure operation of the Digital Video Recorder. It is not used for scheduling or administration of individual recordings.</p>
<div class="figure">
<img src="docresources/configdvrtab1.png" alt="&#39;Digital Video Recorder Profiles&#39; Tab 1" />
<p class="caption">'Digital Video Recorder Profiles' Tab 1</p>
</div>
<div class="figure">
<img src="docresources/configdvrtab2.png" alt="&#39;Digital Video Recorder Profiles&#39; Tab 2" />
<p class="caption">'Digital Video Recorder Profiles' Tab 2</p>
</div>
<div class="figure">
<img src="docresources/configdvrtab3.png" alt="&#39;Digital Video Recorder Profiles&#39; Tab 3" />
<p class="caption">'Digital Video Recorder Profiles' Tab 3</p>
</div>
<h2 id="note-merge-into-one-image">NOTE: <font color=red>Merge into one image</font></h2>
<h2 id="note-have-overview-screenshot-showing-profiles-then-focus-on-config">NOTE: <font color=red>Have overview screenshot showing profiles, then focus on config</font></h2>
<hr />
<h4 id="menu-barbuttons">Menu Bar/Buttons</h4>
<p>The following functions are available:</p>
<table>
<thead>
<tr class="header">
<th align="left">Button</th>
<th align="left">Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Save</strong></td>
<td align="left">Save any changes made to the DVR configuration</td>
</tr>
<tr class="even">
<td align="left"><strong>Undo</strong></td>
<td align="left">Undo any changes made to the DVR configuration since the last save.</td>
</tr>
<tr class="odd">
<td align="left"><strong>Add</strong></td>
<td align="left">Add a new DVR configuration.</td>
</tr>
<tr class="even">
<td align="left"><strong>Delete</strong></td>
<td align="left">Delete an existing DVR configuration.</td>
</tr>
<tr class="odd">
<td align="left"><strong>Help</strong></td>
<td align="left">Display this help page.</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="configuration-options">Configuration Options</h4>
<h4 id="dvr-behaviour">DVR Behaviour</h4>
<p><strong>Media container</strong> : Select the container format used to store recordings.</p>
<p><strong>Cache scheme</strong> : Select the cache scheme used to store recordings. Leave as “system” unless you have a special case for one of the others.</p>
<blockquote>
<p>Whenever you read or write data to the filesystems, the information is kept (cached) in memory for a while. This means that regularly-access files are available quickly without going back to the disc; it also means that there’s a disconnect when writing between the write request (from the application) and the actual write itself (to the disc/storage) as changes are buffered to be written in one go.</p>
</blockquote>
<blockquote>
<ul>
<li><strong>Unknown</strong> : A placeholder status, meaning that the configuration isn’t properly set.</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><strong>System</strong> : Change nothing and rely on standard (default) system caching to behave as it normally would.</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><strong>Do not keep</strong> : Tell the system that you’re not expecting to re-use the data soon, so don’t keep it in cache. The data will still be buffered for writing. <em>Useful e.g. in a RAM-limited system like a Pi (given that you’re unlikely to be watching while recording, so data can be discarded now and read back from disc later).</em></li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><strong>Sync</strong> : Tell the system to write the data immediately. This doesn’t affect whether or not it’s cached. <em>Useful e.g. if you’ve a particular problem with data loss due to delayed write (such as if you get frequent transient power problems).</em></li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><strong>Sync + Do not keep</strong> : A combination of last two variants above - data is written immediately and then discarded from cache.</li>
</ul>
</blockquote>
<p><strong>DVR Log retention time (days)</strong> : Time that Tvheadend will keep information about the recording in its internal database. Notice that the actual recorded file will not be deleted when the log entry is deleted.</p>
<p><strong>Extra time before recordings (minutes)</strong> : Specify the number of minutes to record before the events scheduled start time. Used to cope with small scheduling errors.</p>
<p><strong>Extra time after recordings (minutes)</strong> : Specify the number of minutes to record after the events scheduled stop time. Used to cope with small scheduling errors.</p>
<p><strong>Episode duplicate detection</strong> : If checked, broadcasts with matching title and matching non-zero episode number are considered duplicates.</p>
<p><strong>EPG update window</strong> : Maximum difference between event start times when the EPG event is changed. TVHeadend uses a fuzzy match logic (using title, start times, duration, episode) to check when the event was changed.</p>
<p><strong>Post-processor command</strong> : Command to run after finishing a recording. The command will be run in background and is executed even if a recording is aborted or an error occurred. Use the %e error formatting string to check for errors, the error string is “OK” if recording finished successfully.</p>
<p>Supported format strings:</p>
<table>
<thead>
<tr class="header">
<th align="center">Format</th>
<th align="left">Description</th>
<th align="left">Example value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>%f</code></td>
<td align="left">Full path to recording</td>
<td align="left">/home/user/Videos/News.mkv</td>
</tr>
<tr class="even">
<td align="center"><code>%b</code></td>
<td align="left">Basename of recording</td>
<td align="left">News.mkv</td>
</tr>
<tr class="odd">
<td align="center"><code>%c</code></td>
<td align="left">Channel name</td>
<td align="left">BBC world</td>
</tr>
<tr class="even">
<td align="center"><code>%O</code></td>
<td align="left">Owner of this recording</td>
<td align="left">user</td>
</tr>
<tr class="odd">
<td align="center"><code>%C</code></td>
<td align="left">Who created this recording</td>
<td align="left">user</td>
</tr>
<tr class="even">
<td align="center"><code>%t</code></td>
<td align="left">Program title</td>
<td align="left">News</td>
</tr>
<tr class="odd">
<td align="center"><code>%s</code></td>
<td align="left">Program subtitle</td>
<td align="left">Afternoon</td>
</tr>
<tr class="even">
<td align="center"><code>%p</code></td>
<td align="left">Program episode</td>
<td align="left">S02.E07</td>
</tr>
<tr class="odd">
<td align="center"><code>%d</code></td>
<td align="left">Program description</td>
<td align="left">News and stories…</td>
</tr>
<tr class="even">
<td align="center"><code>%e</code></td>
<td align="left">Error message</td>
<td align="left">Aborted by user</td>
</tr>
<tr class="odd">
<td align="center"><code>%S</code></td>
<td align="left">Start time stamp of recording, UNIX epoch</td>
<td align="left">1224421200</td>
</tr>
<tr class="even">
<td align="center"><code>%E</code></td>
<td align="left">Stop time stamp of recording, UNIX epoch</td>
<td align="left">1224426600</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">
Example usage
</p>
<p>
To use special characters (e.g. spaces), either put the string in quotes or escape the individual characters.
</p>
<p>
<code>/path/to/ffmpeg -i &quot;%f&quot; -vcodec libx264 -acodec copy &quot;/path/with white space/%b&quot;</code>
</p>
</div>
<hr />
<h4 id="recording-file-options">Recording File Options</h4>
<p><strong>Recording system path</strong> : Path to where Tvheadend will write recorded events. If components of the path does not exist, Tvheadend will try to create them.</p>
<p><strong>File permissions</strong> : The permissions to be set on the resultant recording files.</p>
<blockquote>
<p>This is useful if you need to manipulate the files after recording under a different user ID, e.g. to chop out commercials.</p>
</blockquote>
<blockquote>
<p>Common examples:</p>
</blockquote>
<blockquote>
<table>
<thead>
<tr class="header">
<th align="center">Mode</th>
<th align="left">Permissions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0644</strong></td>
<td align="left">rw-r–r–</td>
</tr>
<tr class="even">
<td align="center"><strong>0664</strong></td>
<td align="left">rw-rw-r– (default)</td>
</tr>
<tr class="odd">
<td align="center"><strong>0666</strong></td>
<td align="left">rw-rw-rw-</td>
</tr>
</tbody>
</table>
</blockquote>
<blockquote>
<p>Note that the applicable umask applies, so <em>0666</em> with umask <em>0022</em> will produce <em>0644</em> (<code>rw-r–r–</code>). See also <em>Directory permissions</em> in <em>Subdirectory Options</em>.</p>
</blockquote>
<p><strong>Filename charset</strong> : Character set for the created filename. Tvheadend will try to approximate characters to similarly looking ones.</p>
<p><strong>Tag files with metadata</strong> : If checked, media containers that support metadata will be tagged with the metadata associated with the event being recorded.</p>
<p><strong>Skip commercials</strong> : If checked, commercials will be dropped from the recordings. At the moment, commercial detection only works for the swedish channel TV4.</p>
<hr />
<h4 id="full-pathname-specification">Full Pathname Specification</h4>
<p><strong>Format String</strong> : The string allow to manually specify the full path generation using the predefined modifiers for strftime (see <code>man strftime</code>, except <code>%n</code> and <code>%t</code>) and Tvheadend specific. Note that you may modify some of this format string setting using the GUI fields below.</p>
<table>
<thead>
<tr class="header">
<th align="center">Format</th>
<th align="left">Description</th>
<th align="left">Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>$t$n.$x</code></td>
<td align="left">Default format (title, unique number, extension)</td>
<td align="left">Tennis - Wimbledon-1.mkv</td>
</tr>
<tr class="even">
<td align="center"><code>$s</code></td>
<td align="left">Event subtitle name</td>
<td align="left">Sport</td>
</tr>
<tr class="odd">
<td align="center"><code>$t</code></td>
<td align="left">Event title name</td>
<td align="left">Tennis - Wimbledon</td>
</tr>
<tr class="even">
<td align="center"><code>$e</code></td>
<td align="left">Event episode name</td>
<td align="left">S02-E06</td>
</tr>
<tr class="odd">
<td align="center"><code>$c</code></td>
<td align="left">Channel name</td>
<td align="left">SkySport</td>
</tr>
<tr class="even">
<td align="center"><code>$n</code></td>
<td align="left">Unique number added when the file already exists</td>
<td align="left">-1</td>
</tr>
<tr class="odd">
<td align="center"><code>$x</code></td>
<td align="left">Filename extension (from the active stream muxer</td>
<td align="left">mkv</td>
</tr>
<tr class="even">
<td align="center"><code>%F</code></td>
<td align="left">ISO 8601 date format</td>
<td align="left">2011-03-19</td>
</tr>
<tr class="odd">
<td align="center"><code>%R</code></td>
<td align="left">The time in 24-hour notation</td>
<td align="left">14:12</td>
</tr>
</tbody>
</table>
<p>The format strings <code>$t</code>,<code>$s</code>,<code>%e</code>,<code>$c</code> also have delimiter variants such as <code>$ t</code> (space after the dollar character), <code>$-t</code>, <code>$_t</code>, <code>$.t</code>, <code>$,t</code>, <code>$;t</code>. In these cases, the delimiter is applied only when the substituted string is not empty.</p>
<hr />
<h4 id="subdirectory-options">Subdirectory Options</h4>
<p><strong>Directory permissions</strong> : The permissions to be set on any sub-directories created for recordings.</p>
<blockquote>
<p>This is useful if you need to manipulate the files after recording under a different user ID, e.g. to chop out commercials.</p>
</blockquote>
<blockquote>
<p>Common examples:</p>
</blockquote>
<blockquote>
<table>
<thead>
<tr class="header">
<th align="center">Mode</th>
<th align="left">Permissions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0755</strong></td>
<td align="left">rwxr-xr-x</td>
</tr>
<tr class="even">
<td align="center"><strong>0775</strong></td>
<td align="left">rwxrwxr-x (default)</td>
</tr>
<tr class="odd">
<td align="center"><strong>0777</strong></td>
<td align="left">rwxrwxrwx</td>
</tr>
</tbody>
</table>
</blockquote>
<blockquote>
<p>Note that the applicable umask applies, so <em>0777</em> with umask <em>0022</em> will produce <em>0755</em> (<code>rwxr-xr-x</code>). See also <em>File permissions</em> in <em>Recording File Options</em>.</p>
</blockquote>
<p><strong>Make sub-directories per day</strong> : If checked, create a new directory per day in the recording system path. Only days when anything is recorded will be created. The format of the directory will be ISO standard <em>YYYY-MM-DD</em>.</p>
<p><strong>Make sub-directories per channel</strong> : If checked, create a directory per channel when storing events. If both this and the ‘directory per day’ checkbox is enabled, the date-directory will be parent to the per-channel directory.</p>
<p><strong>Make sub-directories per title</strong> : If checked, create a directory per title when storing events. If the day/channel directory checkboxes are also enabled, those directories will be parents of this directory.</p>
<hr />
<h4 id="filename-options">Filename Options</h4>
<p><strong>Include channel name in title</strong> : If checked, include the name of the channel in the event title. This applies to both the titled stored in the file and to the file name itself.</p>
<p><strong>Include date in title</strong> : If checked, include the date for the recording in the event title. This applies to both the titled stored in the file and to the file name itself.</p>
<p><strong>Include time in title</strong> : If checked, include the time for the recording in the event title. This applies to both the titled stored in the file and to the file name itself.</p>
<p><strong>Include episode in title</strong> : If checked, include the season and episode in the title (if such info is available).</p>
<p><strong>Include subtitle in title</strong> : If checked, include the episode subtitle in the title (if such info is available).</p>
<p><strong>Put episode in filename before date and time</strong> : If checked, insert the episode number before the data and time rather than after (assumes <em>Include date</em>, <em>Include time</em> and <em>Include episode</em> options are set).</p>
<p><strong>Remove all unsafe characters from filename</strong> : If checked, all characters that could possibly cause problems for filenaming will be replaced with underscore (<code>_</code>).</p>
<blockquote>
<p>Applies to characters:</p>
</blockquote>
<blockquote>
<ul>
<li>not supported by Windows: <code>/</code> <code>:</code> <code>\</code> <code>&lt;</code> <code>&gt;</code> <code>|</code> <code>*</code> <code>?</code> <code>&quot;</code></li>
<li>control characters (ASCII code below 32)</li>
<li>control and national characters (ASCII code above 122)</li>
</ul>
</blockquote>
<p><strong>Replace whitespace in title with ‘-’</strong> : If checked, whitespace characters (spaces and tabs) will be replaced with ‘-’.</p>
<p><strong>Use Windows-compatible filenames</strong> : If checked, characters not supported in Windows filenames (e.g. for an SMB/CIFS share) will be stripped out or converted.</p>
<blockquote>
<p>Makes the following changes:</p>
</blockquote>
<blockquote>
<ul>
<li>characters not supported by Windows (<code>/</code> <code>:</code> <code>\</code> <code>&lt;</code> <code>&gt;</code> <code>|</code> <code>*</code> <code>?</code> <code>&quot;</code>) will be replaced with underscore (<code>_</code>)</li>
<li>trailing spaces and dots will be removed</li>
</ul>
</blockquote>
<p>Changes to any of these settings must be confirmed by pressing the ‘Save configuration’ button before taking effect.</p>
</div>
